<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
<meta name="google-site-verification" content="IpNgA5aPb7fAewOpvbq-eVkYwuCplcLKol7cG2itN5M" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
  <meta name="google-site-verification" content="google6993574491856c8e.html">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>


<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"rebootcat.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":250,"display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"livere","storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="为什么有这么一出最早接触到数据可视化应该是大学的时候了吧，那个时候使用的工具是matlab,可以用matlat对数据进行分析，进行可视化。但是那个时候总觉得matlab很难用，或者说matlab的代码不太友好，不过我现在也基本忘记了具体怎么使用matlab了。 工作的原因，需要利用监控数据进行软件性能的定标，这个过程就需要用到数据可视化。把海量的数据进行分析，然后可视化，或者可视化然后分析，也算数">
<meta property="og:type" content="article">
<meta property="og:title" content="matplotlib数据可视化小试">
<meta property="og:url" content="https://rebootcat.com/2017/06/10/demos-about-data-visualization-using-matplotlib/index.html">
<meta property="og:site_name" content="林夕水共">
<meta property="og:description" content="为什么有这么一出最早接触到数据可视化应该是大学的时候了吧，那个时候使用的工具是matlab,可以用matlat对数据进行分析，进行可视化。但是那个时候总觉得matlab很难用，或者说matlab的代码不太友好，不过我现在也基本忘记了具体怎么使用matlab了。 工作的原因，需要利用监控数据进行软件性能的定标，这个过程就需要用到数据可视化。把海量的数据进行分析，然后可视化，或者可视化然后分析，也算数">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://o8fj2jbwb.bkt.clouddn.com/sinx.png">
<meta property="og:image" content="http://o8fj2jbwb.bkt.clouddn.com/2dSandiantu.png">
<meta property="og:image" content="http://o8fj2jbwb.bkt.clouddn.com/2dsandian.png">
<meta property="og:image" content="http://o8fj2jbwb.bkt.clouddn.com/3dqumian.png">
<meta property="og:image" content="http://o8fj2jbwb.bkt.clouddn.com/3dqumian2.png">
<meta property="og:image" content="http://o8fj2jbwb.bkt.clouddn.com/sinxdonghua.gif">
<meta property="og:image" content="http://o8fj2jbwb.bkt.clouddn.com/sun1.png">
<meta property="og:image" content="http://o8fj2jbwb.bkt.clouddn.com/sun2.png">
<meta property="og:image" content="http://o8fj2jbwb.bkt.clouddn.com/sunshinehouse.jpg">
<meta property="article:published_time" content="2017-06-10T03:23:58.000Z">
<meta property="article:modified_time" content="2020-09-20T01:36:09.243Z">
<meta property="article:author" content="Smaug">
<meta property="article:tag" content="python">
<meta property="article:tag" content="linux">
<meta property="article:tag" content="matplotlib">
<meta property="article:tag" content="numpy">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://o8fj2jbwb.bkt.clouddn.com/sinx.png">

<link rel="canonical" href="https://rebootcat.com/2017/06/10/demos-about-data-visualization-using-matplotlib/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>matplotlib数据可视化小试 | 林夕水共</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="林夕水共" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">林夕水共</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">关于技术,关于生活</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-guestbook">

    <a href="/guestbook" rel="section"><i class="fa fa-fw fa-fas fa-comments"></i>留言</a>

  </li>
        <li class="menu-item menu-item-photos">

    <a href="/photos" rel="section"><i class="fa fa-fw fa-fas fa-camera-retro"></i>摄影</a>

  </li>
        <li class="menu-item menu-item-wiki">

    <a href="/wiki/" rel="section"><i class="fa fa-fw fa-wikipedia-w"></i>维基</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/smaugx" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://rebootcat.com/2017/06/10/demos-about-data-visualization-using-matplotlib/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://cdn.jsdelivr.net/gh/smaugx/MyblogImgHosting/rebootcat/sidebar_wolf.png">
      <meta itemprop="name" content="Smaug">
      <meta itemprop="description" content="人至贱则无敌">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="林夕水共">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          matplotlib数据可视化小试
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2017-06-10 11:23:58" itemprop="dateCreated datePublished" datetime="2017-06-10T11:23:58+08:00">2017-06-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-20 09:36:09" itemprop="dateModified" datetime="2020-09-20T09:36:09+08:00">2020-09-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2017/06/10/demos-about-data-visualization-using-matplotlib/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2017/06/10/demos-about-data-visualization-using-matplotlib/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="为什么有这么一出"><a href="#为什么有这么一出" class="headerlink" title="为什么有这么一出"></a>为什么有这么一出</h1><p>最早接触到数据可视化应该是大学的时候了吧，那个时候使用的工具是matlab,可以用matlat对数据进行分析，进行可视化。但是那个时候总觉得matlab很难用，或者说matlab的代码不太友好，不过我现在也基本忘记了具体怎么使用matlab了。</p>
<p>工作的原因，需要利用监控数据进行软件性能的定标，这个过程就需要用到数据可视化。把海量的数据进行分析，然后可视化，或者可视化然后分析，也算数据挖掘的范畴吧。具体内容是，拉取小米监控(<a href="https://book.open-falcon.org/zh/index.html" target="_blank" rel="noopener">open-falcon</a>)的历史数据，然后分析CPU,QPS,BandWidth之间的关系。</p>
<h1 id="选择了matplotlib"><a href="#选择了matplotlib" class="headerlink" title="选择了matplotlib"></a>选择了matplotlib</h1><p>数据可视化工具有很多，各种语言的也不一样。我的老本行是使用c/c++，这方面的类库好像很少，正好，刚入门了python，python的第三方库很丰富，数据可视化方面的类库也很丰富，说出来的有Pandas、Seaborn、ggplot、Bokeh、pygal、Plotly、matplotlib,详细可以查看<a href="http://python.jobbole.com/85601/" target="_blank" rel="noopener">这篇文章</a>。最终选择了<a href="http://matplotlib.org/" target="_blank" rel="noopener">matplotlib</a>作为我的数据可视化工具，原因很简单，我分析了自己的需求，需要实现坐标图，可能涉及动画，可能涉及3D，可能涉及散点图等，同时网上关于matplotlib的例子很丰富，官网上的例子也很详尽，上手应该很容易，所以最终选择了matplotlib。</p>
<p>关于matplotlib的介绍，官网如是说：</p>
<a id="more"></a>

<blockquote>
<p>Matplotlib is a Python 2D plotting library which produces publication quality figures in a variety of hardcopy formats and interactive environments across platforms. Matplotlib can be used in Python scripts, the Python and IPython shell, the jupyter notebook, web application servers, and four graphical user interface toolkits.</p>
</blockquote>
<blockquote>
<p>screenshots screenshots screenshots screenshots<br>Matplotlib tries to make easy things easy and hard things possible. You can generate plots, histograms, power spectra, bar charts, errorcharts, scatterplots, etc., with just a few lines of code. For a sampling, see the screenshots, thumbnail gallery, and examples directory</p>
</blockquote>
<blockquote>
<p>For simple plotting the pyplot module provides a MATLAB-like interface, particularly when combined with IPython. For the power user, you have full control of line styles, font properties, axes properties, etc, via an object oriented interface or via a set of functions familiar to MATLAB users.</p>
</blockquote>
<h1 id="matplotlib使用"><a href="#matplotlib使用" class="headerlink" title="matplotlib使用"></a>matplotlib使用</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> python-matplotlib</span><br></pre></td></tr></table></figure>

<h2 id="画一条正弦曲线"><a href="#画一条正弦曲线" class="headerlink" title="画一条正弦曲线"></a>画一条正弦曲线</h2><p>matplotlib的能耐很大，强烈建议你去官网阅读下它的<a href="http://matplotlib.org/gallery.html" target="_blank" rel="noopener">图库</a>。可以看到matplotlib能做的事情很多。</p>
<figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env  python</span><br><span class="line"># -*- coding:utf<span class="number">-8</span> -*-</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="symbol">x</span> = np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.<span class="literal">pi</span>, <span class="number">1000</span>)</span><br><span class="line"><span class="symbol">y</span> = np.<span class="built_in">sin</span>(<span class="symbol">x</span>)</span><br><span class="line">#plt.plot(<span class="symbol">x</span>,np.<span class="built_in">sin</span>(<span class="symbol">x</span>),<span class="symbol">x</span>,np.<span class="built_in">sin</span>(<span class="number">2</span>*<span class="symbol">x</span>))</span><br><span class="line">#plt.plot(<span class="symbol">x</span>,<span class="symbol">y</span>,marker=<span class="string">'o'</span>,mec=<span class="string">'b'</span>,mfc=<span class="string">'w'</span>)</span><br><span class="line">plt.plot(<span class="symbol">x</span>,<span class="symbol">y</span>,mec=<span class="string">'b'</span>,mfc=<span class="string">'w'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>分别注释plt.plot()语句可以得到不同的图谱，上面的结果如下：<br><img src="http://o8fj2jbwb.bkt.clouddn.com/sinx.png" alt=""><br>简单分析代码，首先利用numpy库产生坐标轴x,y的值对，然后把(x,y)值对传入plot函数，最后调用plt.show()显示出来。</p>
<p><strong><em>正是由于这个demo的试验，同时拉取了小米监控的数据，分析后想要得到cpu/bandwidth之间的关系，无非就是一个个(bandwidth,cpu)的值对，最终利用matplotlib以散点图的形式展示出来。这也是最终选择了mtplotlib的一个原因，先试验，或者说调研，看看能不能满足自己的需求。</em></strong></p>
<h2 id="保存画出的曲线图"><a href="#保存画出的曲线图" class="headerlink" title="保存画出的曲线图"></a>保存画出的曲线图</h2><p>保存画出的曲线图有两种方法，第一种方式是ply.show()显示后在图谱的左下角可以手动点击保存到本地；第二种方式就是如下：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">from matplotlib<span class="selector-class">.pyplot</span>  import savefig</span><br><span class="line"><span class="selector-id">#plt</span>.show()</span><br><span class="line"><span class="function"><span class="title">savefig</span><span class="params">(<span class="string">'./sinx.png'</span>)</span></span></span><br></pre></td></tr></table></figure>

<h2 id="散点图"><a href="#散点图" class="headerlink" title="散点图"></a>散点图</h2><p>先上代码，下面分别是两种不同的实现：</p>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">#from matplotlib.pyplot  <span class="keyword">import</span> savefig</span><br><span class="line">plt.switch_backend(<span class="string">'agg'</span>)</span><br><span class="line"></span><br><span class="line">n = <span class="number">100</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">color</span> <span class="built_in">in</span> [<span class="string">'red'</span>,<span class="string">'blue'</span>,<span class="string">'green'</span>]:</span><br><span class="line">    x,y=np.random.rand(<span class="number">2</span>,n)</span><br><span class="line">    scale=<span class="number">100</span>*np.random.rand(n)</span><br><span class="line">    plt.scatter(x,y,c=<span class="built_in">color</span>,s=scale,label=<span class="built_in">color</span>,alpha=<span class="number">0.6</span>,edgecolors=<span class="string">'white'</span>)</span><br><span class="line"></span><br><span class="line">plt.<span class="built_in">title</span>(<span class="string">'Scatter'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'x'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'y'</span>)</span><br><span class="line">plt.legend()</span><br><span class="line">plt.grid(True)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>散点图如下：<br><img src="http://o8fj2jbwb.bkt.clouddn.com/2dSandiantu.png" alt=""><br>解释：x,y=np.random.rand(2,n)产生随机的散点对，scale参数表示点的大小，然后利用for循环对红色，蓝色，绿色循环，设置参数label的值。最终的核心函数是<strong>scatter</strong>，这是画散点图的函数。具体的参数用法可以去matplotlib的官网查看。</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/python</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import numpy as np</span><br><span class="line">import random</span><br><span class="line">#from matplotlib.pyplot  import savefig</span><br><span class="line">#plt.switch<span class="emphasis">_backend('agg')</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">n = 100 </span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">#for color in ['red','blue','green']:</span></span><br><span class="line"><span class="emphasis">color =  'blue'</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">x = np.random.rand(500)</span></span><br><span class="line"><span class="emphasis">y = np.random.rand(500)</span></span><br><span class="line"><span class="emphasis">size = np.random.rand(500) * 50</span></span><br><span class="line"><span class="emphasis">color = np.random.rand(500)</span></span><br><span class="line"><span class="emphasis">plt.scatter(x,y,size,color)</span></span><br><span class="line"><span class="emphasis">plt.colorbar()</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">'''</span></span><br><span class="line"><span class="emphasis">plt.title('Scatter')</span></span><br><span class="line"><span class="emphasis">plt.xlabel('x')</span></span><br><span class="line"><span class="emphasis">plt.ylabel('y')</span></span><br><span class="line"><span class="emphasis">plt.legend()</span></span><br><span class="line"><span class="emphasis">plt.grid(True)</span></span><br><span class="line"><span class="emphasis">'''</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">plt.show()</span></span><br></pre></td></tr></table></figure>
<p>散点图如下：<img src="http://o8fj2jbwb.bkt.clouddn.com/2dsandian.png" alt=""><br>代码类似。</p>
<h2 id="3D曲面图"><a href="#3D曲面图" class="headerlink" title="3D曲面图"></a>3D曲面图</h2><p>先上代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env  python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">Created on Thu Sep 24 16:17:13 2015</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"><span class="comment">#from matplotlib.pyplot  import savefig</span></span><br><span class="line"><span class="comment">#plt.switch_backend('agg')</span></span><br><span class="line"></span><br><span class="line">fig = plt.figure()</span><br><span class="line">ax = Axes3D(fig)</span><br><span class="line">X = np.arange(<span class="number">-4</span>, <span class="number">4</span>, <span class="number">0.25</span>)</span><br><span class="line">Y = np.arange(<span class="number">-4</span>, <span class="number">4</span>, <span class="number">0.25</span>)</span><br><span class="line">X, Y = np.meshgrid(X, Y)</span><br><span class="line">R = np.sqrt(X**<span class="number">2</span> + Y**<span class="number">2</span>)</span><br><span class="line">Z = np.sin(R)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 具体函数方法可用 help(function) 查看，如：help(ax.plot_surface)</span></span><br><span class="line">ax.plot_surface(X, Y, Z, rstride=<span class="number">1</span>, cstride=<span class="number">1</span>, cmap=<span class="string">'rainbow'</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">#savefig('/home/niki/sharedmac/3dqumiantu.png')</span></span><br></pre></td></tr></table></figure>
<p>3D曲面图如下：<br><img src="http://o8fj2jbwb.bkt.clouddn.com/3dqumian.png" alt=""><br>代码就不多解释了，具体用到可以去官网查看API。这个3D曲面是可以用鼠标拖动翻转的，如下：<br><img src="http://o8fj2jbwb.bkt.clouddn.com/3dqumian2.png" alt=""></p>
<h2 id="动画制作"><a href="#动画制作" class="headerlink" title="动画制作"></a>动画制作</h2><p>利用matplotlib制作动画也是可行的，废话不多说，先上代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt   </span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> animation   </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">  </span><br><span class="line"><span class="comment">#first set up the figure, the axis, and the plot element we want to animate   </span></span><br><span class="line">fig = plt.figure() </span><br><span class="line">ax1 = fig.add_subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,xlim=(<span class="number">0</span>, <span class="number">2</span>), ylim=(<span class="number">-4</span>, <span class="number">4</span>)) </span><br><span class="line">line, = ax1.plot([], [], lw=<span class="number">2</span>)  </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span><span class="params">()</span>:</span>  </span><br><span class="line">    line.set_data([], [])  </span><br><span class="line">    <span class="keyword">return</span> line</span><br><span class="line"></span><br><span class="line"><span class="comment"># animation function.  this is called sequentially   </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">animate</span><span class="params">(i)</span>:</span></span><br><span class="line"></span><br><span class="line">    x = np.linspace(<span class="number">0</span>, <span class="number">2</span> * np.pi , <span class="number">1000</span>)   </span><br><span class="line">    y = np.sin(<span class="number">2</span> * np.pi * (x - <span class="number">0.01</span> * i))  </span><br><span class="line">    line.set_data(x, y)   </span><br><span class="line">    <span class="keyword">return</span> line</span><br><span class="line"></span><br><span class="line">anim1=animation.FuncAnimation(fig, animate, init_func=init,  frames=<span class="number">100</span>, interval=<span class="number">5</span>)  </span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>代码解读：核心函数FuncAnimation，大致思想是隔一定时间去更新坐标系里的数据，然后可以设置更新的时间，次数等，具体可以去查看API。动画如下：<br><img src="http://o8fj2jbwb.bkt.clouddn.com/sinxdonghua.gif" alt=""></p>
<h2 id="多项式拟合"><a href="#多项式拟合" class="headerlink" title="多项式拟合"></a>多项式拟合</h2><p>在我的场景下，构建好散点图后还不行，还需要对散点图进行多项式拟合，得到近似的一些曲线表达式。</p>
<h3 id="最小二乘法"><a href="#最小二乘法" class="headerlink" title="最小二乘法"></a>最小二乘法</h3><p>关于线性拟合的知识不展开来讲，这里可以参考这篇博文<a href="http://blog.topspeedsnail.com/archives/915" target="_blank" rel="noopener">线性回归：最小二乘曲线拟合算法</a>,代码如下：</p>
<figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import numpy <span class="meta">as</span> np</span><br><span class="line"> </span><br><span class="line">def matrix_lstsqr(<span class="meta">x</span>, y):</span><br><span class="line">    <span class="meta">X</span> = np.vstack([<span class="meta">x</span>, np.ones(l<span class="meta">en(</span><span class="meta">x</span>))]).T</span><br><span class="line">    <span class="meta">return</span> (np.linalg.inv(<span class="meta">X</span>.T.dot(<span class="meta">X</span>)).dot(<span class="meta">X</span>.T)).dot(y)</span><br></pre></td></tr></table></figure>
<p>另外一种实现方式：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from __future__ import division # python 2</span></span><br><span class="line"> </span><br><span class="line"><span class="attr">def</span> <span class="string">classic_lstsqr(x_list, y_list):</span></span><br><span class="line">    <span class="attr">N</span> = <span class="string">len(x_list)</span></span><br><span class="line">    <span class="attr">x_avg</span> = <span class="string">sum(x_list)/N</span></span><br><span class="line">    <span class="attr">y_avg</span> = <span class="string">sum(y_list)/N</span></span><br><span class="line">    <span class="meta">var_x,</span> <span class="string">cov_xy = 0, 0</span></span><br><span class="line">    <span class="attr">for</span> <span class="string">x,y in zip(x_list, y_list):</span></span><br><span class="line">        <span class="attr">temp</span> = <span class="string">x - x_avg</span></span><br><span class="line">        <span class="attr">var_x</span> <span class="string">+= temp**2</span></span><br><span class="line">        <span class="attr">cov_xy</span> <span class="string">+= temp * (y - y_avg)</span></span><br><span class="line">    <span class="attr">slope</span> = <span class="string">cov_xy / var_x</span></span><br><span class="line">    <span class="attr">y_interc</span> = <span class="string">y_avg - slope*x_avg</span></span><br><span class="line">    <span class="attr">return</span> <span class="string">(slope, y_interc)</span></span><br></pre></td></tr></table></figure>
<p>两种方式的异同参考上面提到的博文。</p>
<h3 id="高次多项式拟合"><a href="#高次多项式拟合" class="headerlink" title="高次多项式拟合"></a>高次多项式拟合</h3><p>线性拟合有时候并不能很好的对散点图进行拟合，有时候我们需要提高次数，进行高次多项式的拟合，得到更加精确的表达式，但是这里也注意，过高的次数会产生<strong><em>过拟合</em></strong>现象。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#start多项式拟合</span><br><span class="line">#最高次項为<span class="number">6</span>次方的多項式</span><br><span class="line">line4 = np.polyfit(x, y, <span class="number">6</span>)  #返回多项式的系数</span><br><span class="line">pn4 = np.poly1d(line4)      #根据多项式的系数生成一个多项式计算器</span><br><span class="line">ftext4 = 'y = a*x^<span class="number">6</span> +b*x^<span class="number">5</span>+c*x^<span class="number">4</span>+d*x^<span class="number">3</span>+e*x^<span class="number">2</span>+f*x+g =&#123;&#125;*x^<span class="number">6</span>+ &#123;&#125;*x^<span class="number">5</span> +&#123;&#125;*x^<span class="number">4</span>+&#123;&#125;*x^<span class="number">3</span>+&#123;&#125;*x^<span class="number">2</span>+&#123;&#125;*x+&#123;&#125;'.format(line4[<span class="number">0</span>],line4[<span class="number">1</span>],line4[<span class="number">2</span>],line4[<span class="number">3</span>],line4[<span class="number">4</span>],line4[<span class="number">5</span>],line4[<span class="number">6</span>])</span><br><span class="line">print ftext4</span><br><span class="line"></span><br><span class="line">xaxis = np.linspace(<span class="number">0</span>,max(x),<span class="number">17000</span>)  #<span class="number">0</span>~<span class="number">400</span>采样<span class="number">17000</span>个点，自己的理解</span><br><span class="line">ax.plot(xaxis, pn4(xaxis),color[<span class="number">1</span>],markersize=<span class="number">3</span>)    #markersize表示点&gt;的大小</span><br><span class="line">ax.legend(['<span class="number">6</span>th degree poly',loc='lower right')</span><br><span class="line">ax.grid(True)</span><br></pre></td></tr></table></figure>

<p>这里随便贴一张我项目里最后的图片：<br><img src="http://o8fj2jbwb.bkt.clouddn.com/sun1.png" alt=""><br><img src="http://o8fj2jbwb.bkt.clouddn.com/sun2.png" alt=""></p>
<h1 id="一壶茶喝完"><a href="#一壶茶喝完" class="headerlink" title="一壶茶喝完"></a>一壶茶喝完</h1><p>本篇博客是坐在阳光小镇咖啡餐厅酒吧里一个下午写的，由于是回忆的来写，写的期间为了得到文中的图片，又重新调整了一些代码，可能当时觉得很难或者不易的代码现在看起来比较简单，所以就写的简略了些，见谅。如果后续有想到的再补充。简单来说，matplotlib上手也很容易，官网的例子也很丰富。</p>
<p>好了，到此为止。<br><img src="http://o8fj2jbwb.bkt.clouddn.com/sunshinehouse.jpg" alt=""></p>
<center>洛神柠檬茶</center>


    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2017/08/20/Elasticsearch_handle_with_python/" rel="bookmark">python操作ES(Elasticsearch)</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2018/05/21/analyze_bandwidth/" rel="bookmark">python采集bandwidth信息</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2018/05/20/analyze_cpu/" rel="bookmark">python采集cpu信息</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2018/04/15/python3_in_a_box/" rel="bookmark">一键安装python3环境</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2020/11/14/tcp_accept/" rel="bookmark">TCP全连接和半连接的问题探讨</a></div>
    </li>
  </ul>

        <div class="reward-container">
  <div>buy me a cola!</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="https://cdn.jsdelivr.net/gh/smaugx/MyblogImgHosting/rebootcat/wechat_pay.png" alt="Smaug 微信支付">
        <p>微信支付</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Smaug
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://rebootcat.com/2017/06/10/demos-about-data-visualization-using-matplotlib/" title="matplotlib数据可视化小试">https://rebootcat.com/2017/06/10/demos-about-data-visualization-using-matplotlib/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="https://github.com/smaugx">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>

            <span class="label">Github</span>
          </a>
        </div>

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
              <a href="/tags/linux/" rel="tag"># linux</a>
              <a href="/tags/matplotlib/" rel="tag"># matplotlib</a>
              <a href="/tags/numpy/" rel="tag"># numpy</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2017/05/29/smalltalk_about_interview/" rel="prev" title="聊聊面试那点事">
      <i class="fa fa-chevron-left"></i> 聊聊面试那点事
    </a></div>
      <div class="post-nav-item">
    <a href="/2017/07/16/python-notes/" rel="next" title="python杂记">
      python杂记 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#为什么有这么一出"><span class="nav-number">1.</span> <span class="nav-text">为什么有这么一出</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#选择了matplotlib"><span class="nav-number">2.</span> <span class="nav-text">选择了matplotlib</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#matplotlib使用"><span class="nav-number">3.</span> <span class="nav-text">matplotlib使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装"><span class="nav-number">3.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#画一条正弦曲线"><span class="nav-number">3.2.</span> <span class="nav-text">画一条正弦曲线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#保存画出的曲线图"><span class="nav-number">3.3.</span> <span class="nav-text">保存画出的曲线图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#散点图"><span class="nav-number">3.4.</span> <span class="nav-text">散点图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3D曲面图"><span class="nav-number">3.5.</span> <span class="nav-text">3D曲面图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#动画制作"><span class="nav-number">3.6.</span> <span class="nav-text">动画制作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多项式拟合"><span class="nav-number">3.7.</span> <span class="nav-text">多项式拟合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#最小二乘法"><span class="nav-number">3.7.1.</span> <span class="nav-text">最小二乘法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高次多项式拟合"><span class="nav-number">3.7.2.</span> <span class="nav-text">高次多项式拟合</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一壶茶喝完"><span class="nav-number">4.</span> <span class="nav-text">一壶茶喝完</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Smaug"
      src="https://cdn.jsdelivr.net/gh/smaugx/MyblogImgHosting/rebootcat/sidebar_wolf.png">
  <p class="site-author-name" itemprop="name">Smaug</p>
  <div class="site-description" itemprop="description">人至贱则无敌</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">62</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">154</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/smaugx" title="Github → https:&#x2F;&#x2F;github.com&#x2F;smaugx" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>Github</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://子不语.site/" title="https:&#x2F;&#x2F;子不语.site&#x2F;" rel="noopener" target="_blank">子不语</a>
        </li>
    </ul>
  </div>

      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2016 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Smaug</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>

  <span class="post-meta-divider">|</span>
	<span class="smaug_cnzz">
	<script type="text/javascript">document.write(unescape("%3Cspan id='cnzz_stat_icon_1279285424'%3E%3C/span%3E%3Cscript src='https://s9.cnzz.com/z_stat.php%3Fid%3D1279285424' type='text/javascript'%3E%3C/script%3E"));</script>
	</span>

</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'd5vhXhrHKkiBVVpR1WJJLgQP-gzGzoHsz',
      appKey     : 'BRzIFYxjcm34z68pyNalDPtw',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>





    <script type="text/javascript">
        if(window.location.hash){
            var checkExist = setInterval(function() {
                if ($(window.location.hash).length) {
                    $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
                    clearInterval(checkExist);
                }
            }, 100);
        }
    </script>


</body>
</html>
